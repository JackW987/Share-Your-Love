<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>Bootstrap 101 Template</title>
    <script src="js/html5.js" th:src="@{~/js/html5.js}"></script>
    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" th:href="@{~/css/bootstrap.min.css}" rel="stylesheet">
    <!-- 腾讯云 -->
    <link rel="stylesheet" href="http://imgcache.qq.com/open/qcloud/video/tcplayer/tcplayer.css">
    <link rel="stylesheet" type="text/css" href="css/bootstrap-datetimepicker.min.css" th:href="@{~/css/bootstrap-datetimepicker.min.css}">
    <link rel="stylesheet" type="text/css" href="css/adminCss/adminNav.css" th:href="@{~/css/adminCss/adminNav.css}">
    <link rel="stylesheet" type="text/css" href="css/animate.css" th:href="@{~/css/animate.css}">
    <link rel="stylesheet" type="text/css" href="css/adminCss/adminImg.css" th:href="@{~/css/adminCss/adminImg.css}">
    <link rel="stylesheet" type="text/css" href="css/adminCss/adminRecover.css" th:href="@{~/css/adminCss/adminRecover.css}">
    <link rel="stylesheet" href="css/myPagination.css" th:href="@{~/css/myPagination.css}">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <!-- 导航样式 -->
    <div class="admin-top-nav"> 
      <div class="top-nav-logo">
       Share Your love
      </div>
      <a href="javascript:void(0);" class="login-out">
        <i class="glyphicon glyphicon-log-out">
          
        </i>
        <span>
          退出
        </span>
      </a> 
      <span href="javascript:void(0);" class="remind-msg msg-bell">
        <i class="glyphicon glyphicon-bell">
          <span class="remind-msg-bubble add-green">
            99+
          </span>
        </i>
        <ul class="remind-ul">
         <li class="web-msg">
           <a href="adminHomepage.html">
            <i class="glyphicon glyphicon-cloud-upload"></i>
             最新访问量数据已经更新
             <span>
               30分钟前
             </span>  
           </a>   
         </li> 
         <li class="web-msg">
          <a href="adminReport.html">
            <i class="glyphicon glyphicon-info-sign"></i>
             有新的举报内容
             <span>
               30分钟前
             </span>
          </a> 
         </li>
         <li class="web-msg">
          <a href="adminHomepage.html">
            <i class="glyphicon glyphicon-fire"></i>
             月最佳员工数据更新
             <span>
               30分钟前
             </span>
          </a> 
         </li>
        </ul>
      </span>
      <span class="welcome-msg">
        欢迎你,管理员
      </span>
    </div>
    <div class="admin-left-nav">
      <div class="left-nav-head">
        <div class="head-picture">
          <img src="images/head/browse-head-1.jpg" alt="head-1"> 
        </div>
        <span class="head-msg">
          <i class="glyphicon glyphicon-unchecked"></i>
          普通管理员
        </span>
      </div>
      <ul class="main-menu">
        <li>
          <a href="/admin/index">
            <i class="glyphicon glyphicon-home"></i>
            <span>首页</span>
          </a> 
        </li>
        <li class="user">
          <a href="/admin/imgTxt">
            <i class="glyphicon glyphicon-tasks"></i>
            <span>图文</span>
          </a>  
        </li>
        <li class="user">
          <a href="/admin/imgTxt/recover">
            <i class="glyphicon glyphicon-list-alt"></i>
            <span>恢复图文</span>
          </a>
        </li>
        <li class="user">
          <a href="/admin/labels">
            <i class="glyphicon glyphicon-tags"></i>
            <span>标签</span>
          </a> 
        </li>
        <li class="user">
          <a href="/admin/users">
            <i class="glyphicon glyphicon-user"></i>
            <span>用户</span>
          </a> 
        </li>
        <li>
          <a href="/admin/records">
            <i class="glyphicon glyphicon-file"></i>
            <span>记录</span>
          </a>
        </li>
        <li>
          <a href="/admin/report">
            <i class="glyphicon glyphicon-warning-sign"></i>
            <span>举报</span>
          </a> 
        </li>
      </ul>
    </div>
	  <!-- 影像内容 -->
    	<div class="container">
    		<div class="box-container">
          <div class="title">
            图文内容管理
          </div>
          <div class="top-nav-search">
              <i class="glyphicon glyphicon-search">
              
              </i>
              <input type="text" placeholder="搜索内容...">
              <!-- 下拉菜单 -->
          <div class="btn-group search" role="group">
            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              搜索
            </button>
          </div>
            <!-- 条件检索 -->
          <!--<div class="btn-group condition">-->
            <!--<button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">-->
              <!--条件筛选 <span class="caret"></span>-->
              <!--</button>-->
            <!--<ul class="dropdown-menu">-->
              <!--<li><a href="#" id="hot-top-bottom">按热度从高到低</a></li>-->
              <!--<li><a href="#" id="time-sooner-later">按发布时间从早到晚</a></li>-->
              <!--<li><a href="#" id="ID-small-big">按图文ID从小到大</a></li>-->
            <!--</ul>-->
          <!--</div>-->
        </div>
        <table class="table">
          <thead>
            <tr>
              <th>#</th>
              <th>标题</th>
              <th>类型</th>
              <th>作者</th>
              <th>发布时间</th>
              <th>操作</th>
            </tr>
          </thead>
          <tbody>
            <tr th:each="article : ${articles.getObjectList()}">
              <td th:text="${article.getId()}">
                1
              </td>
              <td th:text="${article.getTitle()}">
                上洛记
              </td>
              <td th:text="${article.getUser().getNickname()}">
                妙鲜包
              </td>
              <td th:text="${article.getCreateDate()}">
                2017-09-10 21:18:37
              </td>
              <td data-th-data-id="${article.getId()}" data-type="article">
                <button class="btn btn-primary btn-browse glyphicon glyphicon-eye-open btn-xs" data-toggle="modal" data-target="#imgTxtBox">
                
                </button>
                <button class="btn btn-info btn-detailed glyphicon glyphicon-exclamation-sign btn-xs" data-toggle="modal" data-target="#recover-know">
                  
                </button>
                <button class="btn btn-success btn-repeat glyphicon glyphicon-repeat btn-xs">

                </button>
                <button class="btn btn-danger btn-delete glyphicon glyphicon-trash btn-xs">
                  
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="container bottom-page">
      <div id="pagination" class="pagination" data-th-data-size="${articles.getTotalElements()}"
           data-th-data-page="${articles.getTotalPages()}"
      ></div>
    </div>
    <!-- 详细图文模态框 -->
    <div class="modal fade" id="imgTxtBox" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog imgTxtBoxWidth" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">图文内容</h4>
          </div>
          <div class="modal-body">
        <div class="main-browse">
          <!-- 标题部分 -->
          <h1 class="browse-title">
            面试巧答考官13个问题，总有一个，值得你去借鉴
          </h1>
          <!-- 作者部分 -->
          <div class="browse-author clearfix">
            <a href="javascript:void(0);" class="browse-author-head">
              <img src="images/head/browse-head-1.jpg" alt="browse-head">
            </a>
            <div class="browse-author-info">
              <div class="browse-author-name">
                <span href="javascript:void(0);">
                  火火火火火火
                </span>
              </div>
              <div class="browse-author-time">
                <span>
                  2017年6月12日
                </span>
                <span>
                  评论 0
                </span>
                <span>
                  喜欢 0
                </span>
              </div>

            </div>
          </div>
          <!-- 文章部分 -->
          <div class="browse-content">
            <p>一战真正开启了现代史的进程</p>
            <p>至今我们仍活在一战的百年遗绪中</p>
            <p>这些在近年来已成为耳熟能详的的共识性新常识，却并不为太多人知道</p>
            <p>那些在一战中发生的深刻影响到其后百年全球政治格局的事件，大多集中出现在 1916 年</p>
            <p>1916 年发生的事件，或者通过影响一战的结局进而影响了其后的历史</p>
            <p>或者当时并未对一战的结果产生决定性影响，然而却对后来的全球政治格局演变产生了意想不到的触发作用。</p>
            <p>也因此，1916 年不仅仅是一战史视域中的分割线，更是全球史视野中的关键年份。</p>
            <p>一战真正开启了现代史的进程</p>
            <p>至今我们仍活在一战的百年遗绪中</p>
            <p>这些在近年来已成为耳熟能详的的共识性新常识，却并不为太多人知道</p>
            <p>那些在一战中发生的深刻影响到其后百年全球政治格局的事件，大多集中出现在 1916 年</p>
            <p>1916 年发生的事件，或者通过影响一战的结局进而影响了其后的历史</p>
            <p>或者当时并未对一战的结果产生决定性影响，然而却对后来的全球政治格局演变产生了意想不到的触发作用。</p>
            <p>也因此，1916 年不仅仅是一战史视域中的分割线，更是全球史视野中的关键年份。</p>
            <p>一战真正开启了现代史的进程</p>
            <p>至今我们仍活在一战的百年遗绪中</p>
            <p>这些在近年来已成为耳熟能详的的共识性新常识，却并不为太多人知道</p>
            <p>那些在一战中发生的深刻影响到其后百年全球政治格局的事件，大多集中出现在 1916 年</p>
            <p>1916 年发生的事件，或者通过影响一战的结局进而影响了其后的历史</p>
            <p>或者当时并未对一战的结果产生决定性影响，然而却对后来的全球政治格局演变产生了意想不到的触发作用。</p>
            <p>也因此，1916 年不仅仅是一战史视域中的分割线，更是全球史视野中的关键年份。</p>
          </div>
          <div class="browse-foot">
            © 著作权归作者所有
          </div>
          </div>
        </div>
      </div>
      </div>
    </div>
    <!-- 未通过原因 -->
    <div class="modal fade" id="recover-know" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">未通过具体原因</h4>
          </div>
          <div class="modal-body">
          <!-- 权限管理表单 -->
            <form class="form-horizontal form-power">
              <div class="form-group">
                <label class="col-sm-2 control-label">审核状态</label>
                <div class="col-sm-10">
                  <p class="form-control-static examine-result">未通过</p>
                </div>
              </div>
              <div class="form-group">
                <label for="inputPassword" class="col-sm-2 control-label">具体原因</label>
                <div class="col-sm-10">
                    <div class="recover-know-box">
                      测试内容测试内容测试内容测试内容测试内容测试内容测试内容测试内容测试内容测试内容测试内容测试内容测试内容测试内容测试内容测试内容
                    </div>
                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
          </div>
        </div>
      </div>
    </div>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script type="text/javascript" src="js/plug-ins.js" th:src="@{~/js/plug-ins.js}"></script>
    <!-- 腾讯云 -->
    <script src="http://imgcache.qq.com/open/qcloud/video/tcplayer/tcplayer.min.js"></script>
    <script src="http://imgcache.qq.com/open/qcloud/video/tcplayer/lib/hls.min.0.8.8.js"></script>
    <script type="text/javascript" src="js/layer-plug/layer.js" th:src="@{~/js/layer-plug/layer.js}"></script>
    <script type="text/javascript" src="js/bootstrap-datetimepicker.min.js" th:src="@{~//bootstrap-datetimepicker.min.js}"></script>
    <script type="text/javascript" src="js/bootstrap-datetimepicker.fr.js" th:src="@{~/js/bootstrap-datetimepicker.fr.js}"></script>
    <script type="text/javascript" src="js/adminJs/adminNav.js" th:src="@{~/js/adminJs/adminNav.js}"></script>
    <script type="text/javascript" src="js/adminJs/pageNav.js" th:src="@{~/js/adminJs/pageNav.js}"></script>
    <script type="text/javascript" src="js/adminJs/adminRecover.js" th:src="@{~/js/adminJs/adminRecover.js}"></script>
    <script type="text/javascript" src="/js/axios.min.js" th:src="@{~/js/axios.min.js}"></script>
    <script src="/js/myPagination.js" th:src="@{~/js/myPagination.js}"></script>
    <script type="text/javascript" src="/js/adminJs/adminCommon.js" th:src="@{~/js/adminJs/adminCommon.js}"></script>
    <script>
        $(".search button:eq(0)").click(function () {
            location.href = "/admin/imgTxt/recover/search?searchContent="+$(".top-nav-search input:eq(0)").val();
        });
        $(".btn-detailed").click(function () {
            axios.get('/api/articles/problems/'+$(this).parent().data('id')).then(function (res) {
                $("#recover-know .recover-know-box").html(res.data.data)
            })
        })
        let page = getQueryString('page')
        if (page==null){
            page=1
        }
        window.onload = function () {
            new myPagination({
                id: 'pagination',
                curPage:page, //初始页码
                pageTotal:  $("#pagination").data('page'), //总页数
                pageAmount: 16,  //每页多少条
                dataTotal:  $("#pagination").data('size'), //总共多少条数据
                pageSize: 5, //可选,分页个数
                showPageTotalFlag:false, //是否显示数据统计
                showSkipInputFlag:true, //是否支持跳转
                getPage: function (page) {
                    location.href = "/admin/imgTxt/recover?page="+page;
                }
            })

        }
        function getQueryString(name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
            var r = window.location.search.substr(1).match(reg);
            if (r != null) return decodeURI(r[2]); return null;
        }
    </script>
  </body>
</html>